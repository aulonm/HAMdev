<!DOCTYPE html>
<html lang="en" ng-app="main">
<head>
    <meta charset="UTF-8">
    <title>Organisation Units</title>

    <!-- CSS -->
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">
    <script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>


    <!-- Angular -->
    <script type="text/javascript" src="bower_components/angular/angular.min.js"></script>
    <script type="text/javascript" src="bower_components/angular-route/angular-route.min.js"></script>
    <script type="text/javascript" src="bower_components/angular-resource/angular-resource.min.js"></script>
    <script type="text/javascript" src="bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>

    <script type="text/javascript" src="bower_components/lodash/lodash.min.js"></script>
    <script type="text/javascript" src="bower_components/angular-simple-logger/dist/angular-simple-logger.min.js"></script>
    <script type="text/javascript" src="bower_components/angular-google-maps/dist/angular-google-maps.min.js"></script>

    <script type="text/javascript" src="main.js"></script>
    <script type="text/javascript" src="js/api.js"></script>
    <script type="text/javascript" src="js/mapsController.js"></script>

</head>
<body >
<nav class="navbar" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand" href="#">Organisation Units webApp</a>
        </div>
    </div>
</nav>

<!--Main container-->
<div class="container"ng-controller="mapsCtrl">
    <!-- set columns used for the menu -->
    <!--This way it works with all kinds of resolutions-->
    <div class="col-lg-4 col-md-4 col-sm-4 text-center thumbnail" id="menu">
        <h2>Menu</h2>
        <!-- Find me button-->
        <button class="btn btn-primary" ng-click="setNewCenter()">
            <i class="glyphicon glyphicon-map-marker"></i>
        </button>
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <!-- Search part -->
            <div class="thumbnail">
                <div class="panel-heading">
                    <h2 class="panel-title text-center">Search</h2>
                </div>
                <div class="input-group">
                    <!--<h3>Search</h3>-->
                    <div class="input-group-btn">
                        <button class="btn btn-default" type="submit" ng-click="search()"><i class="glyphicon glyphicon-search"></i>
                        </button>
                    </div>
                    <input type="text" class="form-control" placeholder="Example: Vennesla" ng-model="searchName">
                </div>
                <div class="form-group">
                    <label for="select1">Search level</label>
                    <select class="form-control" id="select1" ng-model="level">
                        <option value="0">All</option>
                        <option value="1">National</option>
                        <option value="2">District</option>
                        <option value="3">Chiefdom</option>
                        <option value="4">Facility</option>
                    </select>
                </div>
            </div>
            <!-- Add new -->
            <div class="thumbnail">
                <div class="form-group" >
                    <div class="panel-heading">
                        <!-- Denne er litt for stor atm. -->
                        <h2 data-toggle="collapse" href="#collapse1"
                            ng-click="legallyCreateCustomMarker = !legallyCreateCustomMarker">Add new
                        </h2>
                    </div>
                    <!--ng-submit er for knappen lenger nede-->
                    <form name="newUnitForm"
                          ng-submit="newUnitForm.$valid && saveNewUnit()" novalidate
                          id="collapse1" class="panel-collapse collapse">
                        <label for="select">Choose Parent</label>
                        <select class="form-control" id="select" ng-model="newUnit.parent" required > <!--Required -->
                            <option value="1">National</option>
                            <option value="2">District</option>
                            <option value="3">Chiefdom</option>
                            <option value="4">Facility</option>
                        </select>
                        <label for="newName">Name</label>
                        <input type="text" class="form-control" id="newName" ng-model="newUnit.name" required>
                        <label for="newShortName">Short Name</label>
                        <input type="text" class="form-control" id="newShortName" ng-model="newUnit.shortName" required>
                        <div class="form-group">
                            <label for="comment">Description:</label>
                            <textarea class="form-control" ng-model="newUnit.description" rows="5" id="comment"></textarea>
                        </div>
                        <label for="newCode">Code</label>
                        <input type="text" class="form-control" id="newCode" ng-model="newUnit.code">
                        <label for="newLatitude">Latitude</label>
                        <input class="form-control" id="newLatitude" ng-model="newUnit.latitude"
                               type="text" ng-value="customMarker.coords.latitude">
                        <label for="newLongitude">Longitude</label>
                        <input class="form-control" id="newLongitude" ng-model="newUnit.longitude"
                               type="text" ng-value="customMarker.coords.longitude">
                        <div class="panel-heading">
                            <button class="btn-primary" type="submit" >Create Unit</button>
                        </div>
                        <div>This form is: {{newUnitFor.$valid}}</div>
                    </form>
                </div>
            </div>
            <!-- Results -->
            <div class="thumbnail">
                <div class="panel-heading">
                    <h2 class="panel-title text-center">Results</h2>
                </div>
                <uib-accordion close-others="oneAtATime">
                    <uib-accordion-group heading="{{facility.name}}" ng-repeat="facility in facilities | orderBy: 'name'">
                        <label for="newName">Name</label>
                        <input type="text" class="form-control" id="newName" ng-value="facility.name">
                        <label for="newShortName">Short Name</label>
                        <input type="text" class="form-control" id="newShortName" ng-value="facility.shortName">
                    </uib-accordion-group>
                </uib-accordion>
                <!--<div class="panel-group" id="accordion">
                    &lt;!&ndash; Vennesla &ndash;&gt;
                    <div class="panel panel-default" ng-repeat="facility in facilities | orderBy: 'name' | filter:search:strict">
                        &lt;!&ndash;<div class="panel-heading">
                            <h4 class="panel-title">
                                <accordion id="accordion_{{$index+((currentPage-1)*20)+1}}" close-others="false">
                                    <accordion-group heading="{{facility.name}}" is-open="facility.open"></accordion-group>
                                </accordion>
                            </h4>
                        </div>&ndash;&gt;
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">{{facility.name}}</a>
                            </h4>
                        </div>
                        <div id="collapse1" class="panel-collapse collapse">
                            <form class="panel-body">
                                &lt;!&ndash;<h5>Name</h5>&ndash;&gt;
                                <div class="form-group">
                                    <label for="ResultName">Name</label>
                                    <input type="text" class="form-control" id="ResultName" value="Vennesla">
                                </div>
                                <div class="form-group">
                                    <label for="ResultShortName">Short name</label>
                                    <input type="text" class="form-control" id="ResultShortName" value="Norges hÃ¸l">
                                </div>
                                <button type="button" class="btn btn-primary" id="saveVennesla">
                                    <span class="glyphicon glyphicon-floppy-disk"> Save</span>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>-->
            </div>
        </div>
    </div>
    <div>
        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12 thumbnail">
            <ui-gmap-google-map center='map.center' zoom='map.zoom' events='map.events' >
                <ui-gmap-marker ng-if="mapClicked" coords="customMarker.coords" idKey="customMarker.idKey">
                </ui-gmap-marker>
                <ui-gmap-markers ng-if="facilityMarkersReady"
                                 models="unitMarkers"
                                 coords="'coords'"
                                 idKey="m.id">
                </ui-gmap-markers>
                <ui-gmap-polygon static="true"
                                 ng-repeat="p in unitPolygons"
                                 path="p.path"
                                 stroke="p.stroke"
                                 visible="p.visible"
                                 geodesic="p.geodesic"
                                 fill="p.fill"
                                 editable="p.editable"
                                 draggable="p.draggable">
                </ui-gmap-polygon>
            </ui-gmap-google-map>
        </div>
    </div>
</div>

</body>
</html>
